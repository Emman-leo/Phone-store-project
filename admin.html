<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - CPA Gadgets Hub</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dark-mode.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body class="bg-secondary">
    <!-- NAVBAR -->
    <div id="navbar-container"></div>

    <div class="container py-5">
        <div id="login-section" class="admin-login-container">
            <div class="row w-100 justify-content-center">
                <div class="col-md-5" data-aos="zoom-in">
                    <div class="card glass-card p-4">
                        <div class="card-body">
                            <div class="text-center mb-5">
                                <i class="bi bi-shield-lock text-primary fs-1 mb-3"></i>
                                <h2 class="fw-bold">Admin Portal</h2>
                                <p class="text-muted">Secure access to CPA Gadgets Hub</p>
                            </div>
                            <form id="login-form">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="email" placeholder="name@example.com" required>
                                    <label for="email">Email address</label>
                                </div>
                                <div class="form-floating mb-4">
                                    <input type="password" class="form-control" id="password" placeholder="Password" required>
                                    <label for="password">Password</label>
                                </div>
                                <button type="submit" class="btn btn-primary w-100 py-3 rounded-pill fw-bold">Sign In</button>
                            </form>
                            <div id="login-error" class="text-danger mt-3 text-center small"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="admin-dashboard" class="d-none">
            <!-- Stats Bar -->
            <div class="row g-4 mb-5" data-aos="fade-down">
                <div class="col-md-4">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="bi bi-box-seam"></i></div>
                        <h6 class="text-muted mb-1">Total Products</h6>
                        <h3 id="stat-total-products" class="mb-0 fw-bold">0</h3>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-card" style="border-left-color: var(--accent-color);">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--accent-color);"><i class="bi bi-star"></i></div>
                        <h6 class="text-muted mb-1">Featured Items</h6>
                        <h3 id="stat-featured-items" class="mb-0 fw-bold">0</h3>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-card" style="border-left-color: var(--success-color);">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success-color);"><i class="bi bi-tags"></i></div>
                        <h6 class="text-muted mb-1">Categories</h6>
                        <h3 id="stat-categories" class="mb-0 fw-bold">0</h3>
                    </div>
                </div>
            </div>

            <div class="glass-card p-4 mb-5" data-aos="fade-up">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h3 class="fw-bold mb-1">Inventory Management</h3>
                        <p class="text-muted mb-0">Control your store's digital shelf</p>
                    </div>
                    <div class="d-flex gap-2">
                        <button id="add-product-btn" class="btn btn-primary rounded-pill px-4"><i class="bi bi-plus-lg me-2"></i>Add Product</button>
                        <button id="logout-btn" class="btn btn-outline-danger rounded-pill px-4">Logout</button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table admin-table">
                        <thead>
                            <tr>
                                <th>Product Details</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th class="text-end">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="product-list">
                            <!-- Product rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Modal (for Add/Edit) -->
    <div class="modal fade" id="product-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-card border-0">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title fw-bold" id="modal-title">Add Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="product-form">
                        <input type="hidden" id="product-id">
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Product Name</label>
                            <input type="text" class="form-control rounded-pill px-3" id="product-name" placeholder="e.g. iPhone 15 Pro" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Description</label>
                            <textarea class="form-control rounded-3" id="product-description" rows="3" placeholder="Describe the item..."></textarea>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6">
                                <label class="form-label small fw-bold text-muted">Price (${CURRENCY})</label>
                                <input type="number" class="form-control rounded-pill px-3" id="product-price" step="0.01" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label small fw-bold text-muted">Category</label>
                                <input type="text" class="form-control rounded-pill px-3" id="product-category" list="category-list" placeholder="Select or type">
                                <datalist id="category-list">
                                    <option value="Phones">
                                    <option value="Laptops">
                                    <option value="Tablets">
                                    <option value="Wearables">
                                    <option value="Audio">
                                    <option value="Accessories">
                                </datalist>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Image Upload</label>
                            <input type="file" class="form-control rounded-pill" id="product-image-upload" accept="image/*">
                        </div>
                        <div class="mb-4">
                            <label class="form-label small fw-bold text-muted">Or Image URL</label>
                            <input type="url" class="form-control rounded-pill px-3" id="product-image-url" placeholder="https://...">
                        </div>
                        <div class="form-check form-switch mb-4">
                            <input class="form-check-input" type="checkbox" id="product-featured">
                            <label class="form-check-label fw-bold" for="product-featured">Featured Product</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 py-2 rounded-pill fw-bold shadow-sm">Save Product</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <div id="footer-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module" src="supabase-client.js"></script>
    <script type="module" src="script.js"></script>
    <script type="module" src="admin.js"></script>
</body>
</html>